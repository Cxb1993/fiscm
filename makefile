#-----------BEGIN MAKEFILE-------------------------------------------------
            SHELL         = /bin/sh
            DEF_FLAGS     = -P -C -traditional 
            EXEC          = fiscm 
#--------------------------------------------------------------------------
#  APPLE OS X/Absoft (G5)
#--------------------------------------------------------------------------
#         CPPFLAGS = $(DEF_FLAGS)  
#         ABSOFTLIB = /Applications/Absoft/lib/f77_oldnames.o
#         CPP      = /usr/bin/cpp
#         FC       = f90 -YEXT_NAMES=LCS  #-O3
#         DEBFLGS  =  # -qcheck -C -g
#         OPT      =
#--------------------------------------------------------------------------
# APPLE / gfortran 
#--------------------------------------------------------------------------
         CPPFLAGS = $(DEF_FLAGS)
         CPP      = /usr/bin/cpp
         FC       = gfortran
         DEBFLGS  = 
         OPT      = 
#==========================================================================
#  END USER DEFINITION SECTION
#==========================================================================

         FFLAGS = $(DEBFLGS) $(OPT) 
         MDEPFLAGS = --cpp --fext=f90 --file=-
         RANLIB = ranlib

#--------------------------------------------------------------------------
#  Libraries           
#--------------------------------------------------------------------------


#--------------------------------------------------------------------------
#  Preprocessing and Compilation Directives
#--------------------------------------------------------------------------
.SUFFIXES: .o .f90 

.f90.o:
	$(FC) -c $(FFLAGS) $(FIXEDFLAGS) $(INCS) $(INCLDIR) $*.f90  

#--------------------------------------------------------------------------
#  FISCM Source Code.
#--------------------------------------------------------------------------


F95FILES=    gparms.f90 mod_pvar.f90 mod_igroup.f90 bio.f90 adv_diff.f90\
			output.f90 fiscm.f90


 SRCS = $(F95FILES) 

 OBJS = $(SRCS:.f90=.o)

#--------------------------------------------------------------------------
#  Linking Directives               
#--------------------------------------------------------------------------

$(EXEC):	$(OBJS)
		$(FC) $(FFLAGS) $(LDFLAGS) -o $(EXEC) $(OBJS) $(LIBS)

#--------------------------------------------------------------------------
#  Target to create dependecies.
#--------------------------------------------------------------------------

depend:
		makedepf90  $(SRCS) >> makedepends


#--------------------------------------------------------------------------
#  Tar Up Code                           
#--------------------------------------------------------------------------

tarfile:
	tar cvf fiscm.tar *.f90  makefile input.txt  makedepends 

#--------------------------------------------------------------------------
#  Cleaning targets.
#--------------------------------------------------------------------------

clean:
		/bin/rm -f *.o *.mod fiscm 

#--------------------------------------------------------------------------
#  Common rules for all Makefiles - do not edit.
#--------------------------------------------------------------------------

emptyrule::

#--------------------------------------------------------------------------
#  Empty rules for directories that do not have SUBDIRS - do not edit.
#--------------------------------------------------------------------------

install::
	@echo "install in $(CURRENT_DIR) done"

install.man::
	@echo "install.man in $(CURRENT_DIR) done"

Makefiles::

includes::
include ./makedepends
